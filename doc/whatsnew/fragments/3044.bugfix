Fix bug in detecting ``unused-variable`` when iterating on variable.

Closes #3044
