Adds new functionality with preferred-modules configuration to detect submodules.

Refs #7957
